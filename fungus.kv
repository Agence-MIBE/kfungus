#:kivy 1.8.0

<TetroGrid>:
	size_hint: None, None

<GridBlock>:
	sprite: sprite
	grid_background: grid_background
	Image:
		id: grid_background
		pos: self.parent.pos
		source: 'Graphics/Grid/block.png'
	Image:
		id: sprite
		pos: self.parent.pos
		source: 'Graphics/blank.png'

<GameGridView>:
	do_rotation: False
	size_hint: None, None
	center: self.parent.center
	#canvas.after:
	#	Color:
	#		rgba: 1, 0, 0, 0.5
	#	Rectangle:
	#		size: self.size
	#		pos: self.pos

<VertLine>:
	size_hint_x: None
	width: 4
	canvas:
		Rectangle:
			pos: self.pos
			size: self.size

<HorizLine>:
	size_hint_y: None
	height: 4
	canvas:
		Rectangle:
			pos: self.pos
			size: self.size

<Ghost>:
	ghost_grid: ghost_grid
	do_rotation: False
	auto_bring_to_front: True
	size_hint: None, None
	size: ghost_grid.size
	TetroGrid:
		id: ghost_grid

<NewPieceBox>:
	grid: grid
	size_hint_y: None
	height: 136
	x: 304-self.width
	canvas:
		Line:
			points: [self.x,self.y, self.x+self.width,self.y, self.x+self.width,self.y+self.height, self.x,self.y+self.height, self.x,self.y]
	TetroGrid:
		id: grid
		center: self.parent.center

<ButtonsGrid>:
	orientation: 'horizontal'
	size_hint_y: None
	height: 100
	Button:
		on_press: app.open_settings()
		Image:
			source: 'Graphics/settings.png'
			center: self.parent.center
	Button:
		on_press: app.game.toggle_bite_mode()
		Image:
			source: 'Graphics/Bite/norm-0.png'
			center: self.parent.center
	Button:
		on_press: app.game.rotate_new_piece()
		Image:
			source: 'Graphics/rotate.png'
			center: self.parent.center

<PlayerWidget>:
	name_label: name_label
	bites_grid: bites_grid
	icon: icon
	orientation: 'vertical'
	Image:
		id: icon
		allow_stretch: True
		size: self.texture_size
		top: self.parent.top-16
		x: self.parent.x+16
	Label:
		id: name_label
		size: self.texture_size
		x: self.parent.x + 64
		y: self.parent.top - self.height - 24
		text: 'Algae'
	GridLayout:
		id: bites_grid
		cols: 5
		x: self.parent.x + 16
		y: self.parent.top - self.height - 32

<FungusGame>:
	side_panel: side_panel
	ggview: ggview
	BoxLayout:
		orientation: 'horizontal'
		StencilView:
			GameGridView:
				id: ggview
		VertLine:
		BoxLayout:
			id: side_panel
			orientation: 'vertical'
			size_hint_x: None
			width: 320
